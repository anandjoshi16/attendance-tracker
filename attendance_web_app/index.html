<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Attendance Tracker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #6dd5ed, #2193b0);
      color: #fff;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    .container {
      margin: 40px auto;
      padding: 20px;
      max-width: 700px;
      background: rgba(0,0,0,0.6);
      border-radius: 12px;
    }
    h2 { margin-bottom: 20px; }
    input, select, button {
      padding: 10px;
      margin: 8px;
      width: 90%;
      border: none;
      border-radius: 8px;
    }
    button {
      background: #ff9800;
      color: white;
      cursor: pointer;
    }
    button:hover { background: #e68900; }
    .hidden { display: none; }
    table {
      width: 100%;
      margin-top: 15px;
      border-collapse: collapse;
      background: white;
      color: black;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 6px;
      text-align: center;
    }
    footer {
      margin-top: 20px;
      padding: 10px;
      font-size: 14px;
      color: #eee;
    }
    .edit-btn {
      background: #4caf50;
      color: white;
      border: none;
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <!-- LOGIN -->
  <div id="loginPage" class="container">
    <h2>Admin Login</h2>
    <input type="text" id="loginId" placeholder="Enter Admin ID">
    <input type="password" id="loginPassword" placeholder="Enter Password">
    <button onclick="login()">Login</button>
    <p id="loginError" style="color:red;"></p>
  </div>

  <!-- ADMIN PANEL -->
  <div id="adminPanel" class="container hidden">
    <h2>Admin Panel</h2>
    <h3>Attendance Management</h3>
    <select id="staffSelect"></select>
    <input type="date" id="dateInput">
    <input type="time" id="timeInInput" placeholder="Time In">
    <input type="time" id="timeOutInput" placeholder="Time Out">
    <input type="number" id="advanceInput" placeholder="Advance Amount">
    <button onclick="markAttendance()">Save Attendance</button>

    <h3>Attendance Records</h3>
    <table id="attendanceTable">
      <tr>
        <th>Date</th>
        <th>Staff</th>
        <th>Time In</th>
        <th>Time Out</th>
        <th>Hours</th>
        <th>Advance</th>
        <th>Edit</th>
      </tr>
    </table>
  </div>

  <footer>Made by Anand Joshi</footer>

  <script>
    // Staff List
    const staffList = ["Anand", "Uttam", "Sunil", "Pravin", "Alpesh", "Raj", "Piyush", "Vishwa"];
    const attendanceData = JSON.parse(localStorage.getItem("attendanceData")) || [];

    const loginPage = document.getElementById("loginPage");
    const adminPanel = document.getElementById("adminPanel");
    const staffSelect = document.getElementById("staffSelect");

    staffList.forEach(name => {
      let opt = document.createElement("option");
      opt.value = name;
      opt.textContent = name;
      staffSelect.appendChild(opt);
    });

    function login() {
      const id = document.getElementById("loginId").value;
      const pass = document.getElementById("loginPassword").value;

      if (id === "anandjoshi@123" && pass === "6508") {
        loginPage.classList.add("hidden");
        adminPanel.classList.remove("hidden");
        renderAttendanceTable();
      } else {
        document.getElementById("loginError").innerText = "Invalid credentials!";
      }
    }

    function markAttendance() {
      const staff = document.getElementById("staffSelect").value;
      const date = document.getElementById("dateInput").value;
      const timeIn = document.getElementById("timeInInput").value;
      const timeOut = document.getElementById("timeOutInput").value;
      const advance = document.getElementById("advanceInput").value;

      if (!date) return alert("Please select a date");

      let hours = "";
      if (timeIn && timeOut) {
        let start = new Date("1970-01-01T" + timeIn + ":00");
        let end = new Date("1970-01-01T" + timeOut + ":00");
        let diff = (end - start) / (1000 * 60 * 60);
        hours = diff.toFixed(2);
      }

      attendanceData.push({date, staff, timeIn, timeOut, hours, advance});
      localStorage.setItem("attendanceData", JSON.stringify(attendanceData));
      renderAttendanceTable();
    }

    function renderAttendanceTable() {
      const table = document.getElementById("attendanceTable");
      table.innerHTML = `
        <tr>
          <th>Date</th><th>Staff</th><th>Time In</th><th>Time Out</th>
          <th>Hours</th><th>Advance</th><th>Edit</th>
        </tr>`;
      attendanceData.forEach((r, index) => {
        table.innerHTML += `<tr>
          <td>${r.date}</td><td>${r.staff}</td>
          <td>${r.timeIn}</td><td>${r.timeOut}</td>
          <td>${r.hours}</td><td>${r.advance || 0}</td>
          <td><button class="edit-btn" onclick="editRecord(${index})">Edit</button></td>
        </tr>`;
      });
    }

    function editRecord(index) {
      let r = attendanceData[index];
      document.getElementById("staffSelect").value = r.staff;
      document.getElementById("dateInput").value = r.date;
      document.getElementById("timeInInput").value = r.timeIn;
      document.getElementById("timeOutInput").value = r.timeOut;
      document.getElementById("advanceInput").value = r.advance;

      // Remove old entry so that edited one will overwrite
      attendanceData.splice(index, 1);
      localStorage.setItem("attendanceData", JSON.stringify(attendanceData));
      renderAttendanceTable();
    }
  </script>
</body>
</html>
